<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Financeiro - Restaurante</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">
                <h1>Financeiro Braseiro Grill</h1>
            </div>
            
            <ul class="nav-links">
                <li class="active" id="nav-link-dashboard-li">
                    <a href="#" id="nav-link-dashboard">
                        <i>üìä</i> Dashboard
                    </a>
                </li>
                <li style="display: block;" id="nav-link-perfil-li">
                    <a href="#" id="nav-link-perfil">
                        <i>üë§</i> Meu Perfil
                    </a>
                </li>
                <li style="display: none;" id="nav-link-admin-li">
                    <a href="#" id="nav-link-admin">
                        <i>üë•</i> Gerenciar Usu√°rios
                    </a>
                </li>
                <li>
                    <a href="#" id="logout-btn">
                        <i>üö™</i> Logout
                    </a>
                </li>
            </ul>
            
            <div class="sidebar-footer">
                <img src="images/Logo-05.png" alt="Logo Braseiro Grill" id="footer-logo">
                <span>¬© 2025 By RMiranda.dev</span>
            </div>
        </div>
        
        <div class="main-content">
            <div class="header">
                <h1>Dashboard Financeiro</h1>
                <span id="current-date">Carregando data...</span>
            </div>
            
            <!-- P√°gina de Admin (oculta por padr√£o) -->
            <div id="admin-page-content" class="page-hidden">
                <div class="admin-container">
                    <div class="admin-form-container">
                        <h2>Registrar Novo Usu√°rio</h2>
                        <form id="admin-register-form">
                            <div class="form-group">
                                <label for="admin-nome">Nome Completo</label>
                                <input type="text" id="admin-nome" required>
                            </div>
                            <div class="form-group">
                                <label for="admin-email">Email</label>
                                <input type="email" id="admin-email" required>
                            </div>
                            <div class="form-group">
                                <label for="admin-senha">Senha Provis√≥ria</label>
                                <input type="password" id="admin-senha" required minlength="6">
                            </div>
                            <button type="submit" class="btn btn-success" id="admin-register-btn">Registrar Usu√°rio</button>
                            <p id="admin-register-message" class="admin-message"></p>
                        </form>
                    </div>
                    
                    <div class="admin-list-container">
                        <h2>Usu√°rios Cadastrados</h2>
                        <div class="table-container" style="max-height: 400px;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>Email</th>
                                        <th>Permiss√£o (Role)</th>
                                        <th>Data de Cria√ß√£o</th>
                                        <th>A√ß√µes</th>
                                    </tr>
                                </thead>
                                <tbody id="admin-user-list-tbody">
                                    <tr><td colspan="5">Carregando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- P√°gina de Perfil (oculta por padr√£o) -->
            <div id="perfil-page-content" class="page-hidden">
                <div class="perfil-container">
                    <div class="perfil-form-container">
                        <h2>Meu Perfil</h2>
                        <form id="perfil-change-password-form">
                            <p>Aqui voc√™ pode alterar sua senha de acesso.</p>
                            <div class="form-group">
                                <label for="perfil-senha-atual">Senha Atual</label>
                                <input type="password" id="perfil-senha-atual" required>
                            </div>
                            <div class="form-group">
                                <label for="perfil-nova-senha">Nova Senha</label>
                                <input type="password" id="perfil-nova-senha" required minlength="6">
                            </div>
                            <div class="form-group">
                                <label for="perfil-confirma-senha">Confirmar Nova Senha</label>
                                <input type="password" id="perfil-confirma-senha" required minlength="6">
                            </div>
                            <button type="submit" class="btn btn-success" id="perfil-save-btn">Alterar Senha</button>
                            <p id="perfil-message" class="admin-message"></p>
                        </form>
                    </div>

                    <div class="perfil-info-container">
                        <h2>Informa√ß√µes</h2>
                        <div class="form-group">
                            <label>Nome</label>
                            <input type="text" id="perfil-info-nome" disabled>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="text" id="perfil-info-email" disabled>
                        </div>
                        <div class="form-group">
                            <label>Permiss√£o</label>
                            <input type="text" id="perfil-info-role" disabled>
                        </div>
                    </div>
                </div>
            </div>

            <!-- P√°gina do Dashboard (vis√≠vel por padr√£o) -->
            <div id="dashboard-page-content">
                <div class="filters">
                    <div class="filter-row">
                        <div class="filter-group action-buttons">
                            <button class="btn btn-success" id="add-entry-btn">+ Adicionar Lan√ßamento</button>
                        </div>
                        <div class="filter-group">
                            <label for="date-range">Per√≠odo</label>
                            <select id="date-range">
                                <option value="today">Hoje</option>
                                <option value="week">Esta Semana</option>
                                <option value="month" selected>Este M√™s</option>
                                <option value="custom">Personalizado</option>
                            </select>
                        </div>
                        <div class="filter-group custom-dates" style="display: none;">
                            <label for="start-date">Data Inicial</label>
                            <input type="date" id="start-date">
                        </div>
                        <div class="filter-group custom-dates" style="display: none;">
                            <label for="end-date">Data Final</label>
                            <input type="date" id="end-date">
                        </div>
                        <div class="filter-group action-buttons">
                            <button class="btn" id="apply-filters">Aplicar Filtros</button>
                        </div>
                        <div class="filter-group action-buttons">
                            <button class="btn" id="export-btn">üì• Exportar (CSV)</button>
                        </div>
                    </div>
                    
                    <div class="filter-row" style="margin-top: 10px;">
                        <div class="filter-group">
                            <label for="filter-tipo">Tipo</label>
                            <select id="filter-tipo">
                                <option value="all" selected>Todos os Tipos</option>
                                <option value="Entrada">Apenas Entradas</option>
                                <option value="Sa√≠da">Apenas Sa√≠das</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="filter-descricao">Descri√ß√£o (busca)</label>
                            <input type="text" id="filter-descricao" placeholder="Cont√©m a palavra...">
                        </div>
                        <div class="filter-group">
                            <label for="filter-valor-min">Valor M√≠nimo (R$)</label>
                            <input type="number" id="filter-valor-min" placeholder="Ex: 50" step="0.01" min="0">
                        </div>
                        <div class="filter-group">
                            <label for="filter-valor-max">Valor M√°ximo (R$)</label>
                            <input type="number" id="filter-valor-max" placeholder="Ex: 500" step="0.01" min="0">
                        </div>
                        <div class="filter-group">
                            <label for="category">Categoria</label>
                            <select id="category">
                                <option value="all">Todas as Categorias</option>
                                <optgroup label="Entradas">
                                    <option value="sales">Vendas (Sal√£o)</option>
                                    <option value="extra">Receb√≠veis Extras</option>
                                </optgroup>
                                <optgroup label="Sa√≠das">
                                        <option value="market">Mercado</option>
                                    <option value="purchases">Compras</option>
                                    <option value="staff">Pessoal</option>
                                    <option value="utilities">Utilidades</option>
                                    <option value="maintenance">Manuten√ß√£o</option>
                                    <option value="taxes">Impostos</option>
                                    <option value="investments">Investimentos</option>
                                    <option value="butchery">A√ßougue</option>
                                    <option value="bills">Contas/Boletos</option>
                                    <option value="salary">Pagamento Sal√°rio</option>
                                    <option value="voucher">Pagamento Vale</option>
                                    <option value="fuel">Combust√≠vel</option>
                                    <option value="other">Outros</option>                                
                                </optgroup>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="payment-method">Forma de Pagamento</label>
                            <select id="payment-method">
                                <option value="all">Todas as Formas</option>
                                <option value="cash">Dinheiro</option>
                                <option value="card">Cart√£o</option>
                                <option value="pix">Pix</option>
                                <option value="transfer">Transfer√™ncia</option>
                                <option value="bill">Boleto</option>
                                <option value="card-pix">Cart√£o + Pix</option>
                                <option value="other">Outro</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div id="kpi-container">
                    <div class="cards">
                        <div class="card saldo-anterior">
                            <h3>Saldo Anterior</h3>
                            <div class="value">R$ 0,00</div>
                            <div class="change">Acumulado at√© o in√≠cio</div>
                        </div>
                        <div class="card saldo-atual">
                            <h3>Saldo Atual em Caixa</h3>
                            <div class="value">R$ 0,00</div>
                            <div class="change">Balan√ßo Total Acumulado</div>
                        </div>
                        <div class="card entradas">
                            <h3>Entradas (do Per√≠odo)</h3>
                            <div class="value">R$ 0,00</div>
                            <div class="change">Filtro de data atual</div>
                        </div>
                        <div class="card saidas">
                            <h3>Sa√≠das (do Per√≠odo)</h3>
                            <div class="value">R$ 0,00</div>
                            <div class="change">Filtro de data atual</div>
                        </div>
                        <div class="card saldo">
                            <h3>Saldo (do Per√≠odo)</h3>
                            <div class="value">R$ 0,00</div>
                            <div class="change">Resultado do per√≠odo</div>
                        </div>
                        <div class="card margem">
                            <h3>Margem (do Per√≠odo)</h3>
                            <div class="value">0,0%</div>
                            <div class="change">Lucro / Entradas</div>
                        </div>
                    </div>
                </div>
                
                <div id="charts-container">
                    <div class="charts">
                        <div class="chart-container">
                            <h2>Fluxo de Caixa (Linha do Tempo)</h2>
                            <canvas id="cashFlowChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <h2>Top Despesas por Categoria</h2>
                            <canvas id="expensesChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="tables">
                    <div class="table-container">
                        <h2>Lan√ßamentos de Entrada (do Per√≠odo)</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th data-sort="data">Data</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Categoria</th>
                                    <th data-sort="valor">Valor</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td colspan="5">Nenhum lan√ßamento encontrado</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="table-container">
                        <h2>Lan√ßamentos de Sa√≠da (do Per√≠odo)</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th data-sort="data">Data</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Categoria</th>
                                    <th data-sort="valor">Valor</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td colspan="5">Nenhum lan√ßamento encontrado</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Adicionar/Editar Lan√ßamentos -->
    <div id="entry-modal" class="modal-backdrop" role="dialog" aria-labelledby="modal-title" aria-hidden="true">
        <div class="modal-content" role="document">
            <div class="modal-header">
                <h2 id="modal-title">Adicionar Novo Lan√ßamento</h2>
                <button id="close-modal-btn" class="close-btn" aria-label="Fechar modal">&times;</button>
            </div>
            <form id="entry-form" class="modal-body">
                <div class="form-group full-width">
                    <label>Tipo de Lan√ßamento</label>
                    <div class="radio-group" role="radiogroup" aria-label="Tipo de lan√ßamento">
                        <label><input type="radio" name="tipo" value="Entrada" id="tipo-entrada" checked> Entrada</label>
                        <label><input type="radio" name="tipo" value="Sa√≠da" id="tipo-saida"> Sa√≠da</label>
                    </div>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="form-data">Data</label>
                        <input type="date" id="form-data" name="form-data" required>
                    </div>
                    <div class="form-group">
                        <label for="form-valor">Valor (R$)</label>
                        <input type="number" id="form-valor" name="form-valor" step="0.01" placeholder="Ex: 150.75" required min="0.01">
                    </div>
                    <div class="form-group full-width">
                        <label for="form-descricao">Descri√ß√£o</label>
                        <input type="text" id="form-descricao" name="form-descricao" placeholder="Ex: Compra de carnes" required>
                    </div>
                    <div class="form-group">
                        <label for="form-categoria">Categoria</label>
                        <select id="form-categoria" name="form-categoria" required>
                            <option value="" disabled selected>Selecione...</option>
                            <optgroup label="Entradas">
                                <option value="sales">Vendas (Sal√£o)</option>
                                <option value="extra">Receb√≠veis Extras</option>
                            </optgroup>
                            <optgroup label="Sa√≠das">
                                <option value="market">Mercado</option>
                                <option value="purchases">Compras</option>
                                <option value="staff">Pessoal</option>
                                <option value="utilities">Utilidades</option>
                                <option value="maintenance">Manuten√ß√£o</option>
                                <option value="taxes">Impostos</option>
                                <option value="investments">Investimentos</option>
                                <option value="butchery">A√ßougue</option>
                                <option value="bills">Contas/Boletos</option>
                                <option value="salary">Pagamento Sal√°rio</option>
                                <option value="voucher">Pagamento Vale</option>
                                <option value="fuel">Combust√≠vel</option>
                                <option value="other">Outros</option>
                            </optgroup>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="form-metodo">M√©todo de Pagamento</label>
                        <select id="form-metodo" name="form-metodo" required>
                            <option value="" disabled selected>Selecione...</option>
                            <option value="cash">Dinheiro</option>
                            <option value="card">Cart√£o</option>
                            <option value="pix">Pix</option>
                            <option value="transfer">Transfer√™ncia</option>
                            <option value="bill">Boleto</option>
                            <option value="card-pix">Cart√£o + Pix</option>
                            <option value="other">Outro</option>
                        </select>
                    </div>
                </div>
            </form>
            <div class="modal-footer">
                <button type="button" id="cancel-btn" class="btn btn-secondary">Cancelar</button>
                <button type="submit" id="save-btn" form="entry-form" class="btn btn-success">Salvar Lan√ßamento</button>
            </div>
        </div>
    </div>
    
    <!-- Modal para Editar Usu√°rios -->
    <div id="edit-user-modal" class="modal-backdrop" role="dialog" aria-labelledby="edit-user-modal-title" aria-hidden="true">
        <div class="modal-content" role="document">
            <div class="modal-header">
                <h2 id="edit-user-modal-title">Editar Usu√°rio</h2>
                <button id="edit-user-close-modal-btn" class="close-btn" aria-label="Fechar modal">&times;</button>
            </div>
            
            <form id="edit-user-form" class="modal-body">
                <input type="hidden" id="edit-user-id">
                <div class="form-group">
                    <label for="edit-user-nome">Nome Completo</label>
                    <input type="text" id="edit-user-nome" required>
                </div>
                <div class="form-group">
                    <label for="edit-user-email">Email</label>
                    <input type="email" id="edit-user-email" required>
                </div>
                <div class="form-group">
                    <label for="edit-user-role">Permiss√£o (Role)</label>
                    <select id="edit-user-role" required>
                        <option value="simples">Usu√°rio Simples</option>
                        <option value="admin">Administrador</option>
                    </select>
                </div>
                <p id="edit-user-message" class="admin-message" style="margin-top: 0;"></p>
            </form>
            
            <div class="modal-footer">
                <button type="button" id="edit-user-cancel-btn" class="btn btn-secondary">Cancelar</button>
                <button type="submit" id="edit-user-save-btn" form="edit-user-form" class="btn btn-success">Salvar Altera√ß√µes</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>