<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Braseiro Grill</title>
    <link rel="icon" type="image/png" href="images/icon-brasa.png">
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    
    <style>
        /* Multi-Pagamento */
        .payment-row { display: flex; gap: 10px; margin-bottom: 10px; align-items: center; }
        .payment-row input, .payment-row select { flex: 1; }
        .btn-remove-row { background: #e74c3c; color: white; border: none; width: 30px; height: 30px; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .total-display { text-align: right; font-weight: bold; font-size: 1.1rem; color: var(--primary); margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px;}
        
        /* Pagina√ß√£o */
        .pagination-container { display: flex; justify-content: center; align-items: center; margin-top: 20px; gap: 15px; padding: 10px; background: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .pagination-info { font-weight: bold; color: #555; }
        .page-size-select { padding: 8px; border: 1px solid #ddd; border-radius: 4px; color: #555; background-color: #fff; cursor: pointer; }

        /* MODAL DE CONFIRMA√á√ÉO (GIGANTE) */
        #modal-confirm .modal-content { 
            max-width: 550px; 
            padding: 40px; 
            text-align: center; 
            border-radius: 15px;
        }
        #modal-confirm h3 { 
            margin-bottom: 20px; 
            font-size: 2rem; 
            color: var(--primary); 
        }
        #modal-confirm p { 
            margin-bottom: 35px; 
            color: #555; 
            font-size: 1.4rem; 
        }
        .confirm-actions { 
            display: flex; 
            justify-content: center; 
            gap: 20px; 
        }
        .confirm-actions .btn { 
            min-width: 150px; 
            padding: 15px 0; 
            font-size: 1.2rem; 
            font-weight: bold; 
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo"><h1>Braseiro Grill</h1></div>
            <ul class="nav-links">
                <li class="active" id="nav-link-dashboard-li"><a href="#" id="menu-dashboard"><i>üìä</i> Dashboard</a></li>
                <li id="nav-link-perfil-li"><a href="#" id="menu-perfil"><i>üë§</i> Meu Perfil</a></li>
                <li id="nav-link-admin-li" style="display: none;"><a href="#" id="menu-admin"><i>üë•</i> Gerenciar Usu√°rios</a></li>
                <li id="nav-link-logs-li" style="display: none;"><a href="#" id="menu-logs"><i>üìú</i> Logs do Sistema</a></li>
                <li><a href="#" id="btn-logout"><i>üö™</i> Logout</a></li>
            </ul>
            <div class="sidebar-footer">
                <img src="images/Logo-05.png" id="footer-logo">
                <span>¬© 2025 By RMiranda</span>
                <span>Vers√£o 2.1</span>
            </div>
        </div>
        
        <div class="main-content">
            <div class="header"><h1>Dashboard Financeiro</h1><span id="current-date"></span></div>

            <div id="page-dashboard" class="page-section">
                <div class="filters">
                    <div class="filter-row">
                        <div class="filter-group action-buttons"><button class="btn btn-success" id="btn-novo-lanc">+ Adicionar Lan√ßamento</button></div>
                        <div class="filter-group"><label>Per√≠odo</label><select id="filtro-periodo"><option value="month">Este M√™s</option><option value="today">Hoje</option><option value="week">Esta Semana</option><option value="custom">Personalizado</option></select></div>
                        <div class="filter-group custom-dates" style="display: none;"><label>In√≠cio</label><input type="date" id="start-date"></div>
                        <div class="filter-group custom-dates" style="display: none;"><label>Fim</label><input type="date" id="end-date"></div>
                        <div class="filter-group action-buttons"><button class="btn" id="btn-atualizar">Aplicar</button></div>
                        <div class="filter-group action-buttons" style="display: flex; gap: 5px;"><button class="btn" id="btn-exportar">CSV</button><button class="btn btn-danger" id="btn-pdf" style="background-color: #e74c3c;">PDF</button></div>
                    </div>
                    <div class="filter-row" style="margin-top: 10px;">
                        <div class="filter-group"><label>Tipo</label><select id="filter-tipo"><option value="all">Todos</option><option value="Entrada">Entradas</option><option value="Sa√≠da">Sa√≠das</option></select></div>
                        <div class="filter-group"><label>Descri√ß√£o</label><input type="text" id="filter-descricao" placeholder="Buscar..."></div>
                        <div class="filter-group"><label>Min R$</label><input type="number" id="filter-valor-min"></div>
                        <div class="filter-group"><label>Max R$</label><input type="number" id="filter-valor-max"></div>
                        <div class="filter-group"><label>Categoria</label><select id="category"><option value="all">Todas</option></select></div>
                        <div class="filter-group"><label>Pagamento</label><select id="payment-method"><option value="all">Todas</option><option value="cash">Dinheiro</option><option value="card">Cart√£o</option><option value="pix">Pix</option><option value="transfer">Transfer√™ncia</option><option value="bill">Boleto</option><option value="card-pix">Cart√£o+Pix</option><option value="other">Outro</option></select></div>
                    </div>
                </div>

                <div id="kpi-container">
                    <div class="cards">
                        <div class="card saldo-anterior"><h3>Saldo Anterior</h3><div class="value" id="kpi-saldo-anterior">R$ 0,00</div></div>
                        <div class="card saldo-atual"><h3>Saldo Atual</h3><div class="value" id="kpi-saldo-atual">R$ 0,00</div></div>
                        <div class="card entradas"><h3>Entradas</h3><div class="value" id="kpi-entradas">R$ 0,00</div></div>
                        <div class="card saidas"><h3>Sa√≠das</h3><div class="value" id="kpi-saidas">R$ 0,00</div></div>
                        <div class="card saldo"><h3>Saldo</h3><div class="value" id="kpi-saldo-periodo">R$ 0,00</div></div>
                        <div class="card margem"><h3>Margem</h3><div class="value" id="kpi-margem">0,0%</div></div>
                    </div>
                </div>

                <div class="charts">
                    <div class="chart-container"><h2>Fluxo de Caixa</h2><canvas id="chart-fluxo"></canvas></div>
                    <div class="chart-container"><h2>Despesas</h2><canvas id="chart-desp"></canvas></div>
                </div>

                <div class="tables">
                    <div class="table-container"><h2>Entradas</h2><table><thead><tr><th>Data</th><th>Descri√ß√£o</th><th>Categoria</th><th>Valor</th><th>A√ß√µes</th></tr></thead><tbody id="tb-entradas"></tbody></table></div>
                    <div class="table-container"><h2>Sa√≠das</h2><table><thead><tr><th>Data</th><th>Descri√ß√£o</th><th>Categoria</th><th>Valor</th><th>A√ß√µes</th></tr></thead><tbody id="tb-saidas"></tbody></table></div>
                </div>

                <div class="pagination-container">
                    <select id="items-per-page" class="page-size-select"><option value="10">10 por p√°g</option><option value="20">20 por p√°g</option><option value="50" selected>50 por p√°g</option><option value="100">100 por p√°g</option></select>
                    <button class="btn btn-secondary" id="btn-prev-page">Anterior</button><span class="pagination-info" id="page-info">P√°g 1</span><button class="btn btn-secondary" id="btn-next-page">Pr√≥xima</button>
                </div>
            </div>

            <div id="page-perfil" class="page-section" style="display: none;"><div class="perfil-container"><div class="perfil-info-container"><h2>Informa√ß√µes</h2><div class="form-group"><label>Nome</label><input type="text" id="perf-nome" disabled></div><div class="form-group"><label>Email</label><input type="text" id="perf-email" disabled></div><div class="form-group"><label>Permiss√£o</label><input type="text" id="perf-role" disabled></div></div><div class="perfil-form-container"><h2>Meu Perfil</h2><form id="form-senha"><div class="form-group"><label>Senha Atual</label><input type="password" id="senha-atual" required></div><div class="form-group"><label>Nova Senha</label><input type="password" id="senha-nova" required></div><button type="submit" class="btn btn-success">Alterar Senha</button></form></div></div></div>
            <div id="page-admin" class="page-section" style="display: none;"><div class="admin-container"><div class="admin-form-container"><h2>Novo Usu√°rio</h2><form id="form-user"><div class="form-group"><label>Nome</label><input type="text" id="new-nome" required></div><div class="form-group"><label>Email</label><input type="email" id="new-email" required></div><div class="form-group"><label>Senha</label><input type="password" id="new-senha" required></div><button type="submit" class="btn btn-success">Registrar</button></form></div><div class="admin-list-container"><div class="table-container"><table><thead><tr><th>Nome</th><th>Email</th><th>Permiss√£o</th><th>A√ß√µes</th></tr></thead><tbody id="tb-users"></tbody></table></div></div></div></div>
            <div id="page-logs" class="page-section" style="display: none;"><div class="filters" style="margin-bottom: 20px;"><div class="filter-row"><div class="filter-group"><label>Data In√≠cio</label><input type="date" id="log-start"></div><div class="filter-group"><label>Data Fim</label><input type="date" id="log-end"></div><div class="filter-group"><label>Usu√°rio</label><input type="text" id="log-user" placeholder="Buscar..."></div><div class="filter-group action-buttons" style="align-self: flex-end;"><button class="btn" id="btn-filter-logs">Filtrar</button></div></div></div><div class="table-container"><h2>Logs</h2><table><thead><tr><th>Data</th><th>Usu√°rio</th><th>A√ß√£o</th><th>Detalhes</th></tr></thead><tbody id="tb-logs"></tbody></table></div></div>
        </div>
    </div>

    <div id="modal-lanc" class="modal-backdrop" style="display: none;">
        <div class="modal-content"><div class="modal-header"><h2 id="modal-title">Adicionar Novo Lan√ßamento</h2><button id="btn-close-modal" class="close-btn">&times;</button></div><form id="form-lanc" class="modal-body"><div class="form-group full-width"><label>Tipo de Lan√ßamento</label><div class="radio-group"><label><input type="radio" name="tipo" value="Entrada" required> Entrada</label><label><input type="radio" name="tipo" value="Sa√≠da" required> Sa√≠da</label></div></div><div class="form-grid"><div class="form-group"><label>Data</label><input type="date" id="m-data" required></div><div class="form-group full-width"><label>Descri√ß√£o</label><input type="text" id="m-desc" required></div><div class="form-group"><label>Categoria</label><div style="display:flex; gap:5px;"><select id="m-cat" required style="flex-grow:1;"></select><button type="button" id="btn-add-cat" class="btn btn-secondary" style="padding: 0 10px; font-weight:bold;">+</button></div></div></div><div class="form-group full-width" style="margin-top: 15px;"><label>Valores e Formas de Pagamento</label><div id="payment-rows-container"></div><button type="button" id="btn-add-payment-row" class="btn btn-secondary" style="margin-top: 5px; width: 100%; font-size: 0.9rem;">+ Adicionar outra forma de pagamento</button><div class="total-display">Total: R$ <span id="m-total-display">0,00</span></div></div><div class="modal-footer"><button type="button" id="btn-cancel-modal" class="btn btn-secondary">Cancelar</button><button type="submit" class="btn btn-success">Salvar Lan√ßamento</button></div></form></div>
    </div>
    <div id="modal-new-cat" class="modal-backdrop" style="display: none;">
        <div class="modal-content" style="max-width: 500px;"><div class="modal-header"><h2>Gerenciar Categorias</h2><button id="btn-close-cat" class="close-btn">&times;</button></div><div class="modal-body"><form id="form-new-cat" style="border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 15px;"><div class="form-grid"><div class="form-group"><label>Nome</label><input type="text" id="new-cat-nome" required></div><div class="form-group"><label>Tipo</label><select id="new-cat-tipo"><option value="Entrada">Entrada</option><option value="Sa√≠da">Sa√≠da</option></select></div></div><button type="submit" class="btn btn-success" style="width:100%; margin-top:10px;">Salvar Nova Categoria</button></form><div id="cat-list-container" style="max-height: 250px; overflow-y: auto;"><table style="font-size: 0.9rem;"><thead><tr><th>Nome</th><th>Tipo</th><th>A√ß√£o</th></tr></thead><tbody id="cat-list-tbody"></tbody></table></div></div></div>
    </div>
    <div id="edit-user-modal" class="modal-backdrop" style="display: none;">
        <div class="modal-content"><div class="modal-header"><h2>Editar Usu√°rio</h2><button id="edit-user-close-modal-btn" class="close-btn">&times;</button></div><form id="edit-user-form" class="modal-body"><input type="hidden" id="edit-user-id"><div class="form-group"><label>Nome</label><input type="text" id="edit-user-nome" required></div><div class="form-group"><label>Email</label><input type="email" id="edit-user-email" required></div><div class="form-group"><label>Permiss√£o</label><select id="edit-user-role"><option value="simples">Usu√°rio Simples</option><option value="admin">Administrador</option></select></div><div class="modal-footer"><button type="button" id="edit-user-cancel-btn" class="btn btn-secondary">Cancelar</button><button type="submit" id="edit-user-save-btn" class="btn btn-success">Salvar Altera√ß√µes</button></div></form></div>
    </div>

    <div id="modal-confirm" class="modal-backdrop" style="display: none;">
        <div class="modal-content">
            <h3 id="confirm-title">Confirma√ß√£o</h3>
            <p id="confirm-msg">Tem certeza?</p>
            <div class="confirm-actions">
                <button class="btn btn-secondary" id="btn-confirm-no">Cancelar</button>
                <button class="btn btn-danger" id="btn-confirm-yes">Confirmar</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>